"use strict";var WaveformGenerator=function(t,e){function r(t,e){var r=h.bar.width;0!==h.bar.gap&&(r*=Math.abs(100-h.bar.gap)/100);var a=t+r/2,n=h.waveform.height/2-e/2,o=document.createElement("path");switch(h.bar.align){case"top":n=0;break;case"center":n=h.waveform.height/2-e/2;break;case"bottom":n=h.waveform.height-e}o.setAttribute("d","M"+a+" "+n+" L"+a+" "+n+" L"+a+" "+(n+e)+" L"+a+" "+(n+e)+" L"+a+" "+n+" Z"),o.className=c.id,c.appendChild(o)}function a(t,e,r){for(var a=0,n=t,o=t+e-1;o>=t?o>=n:n>=o;o>=t?n++:n--)a+=Math.pow(r[n],2);return Math.sqrt(a/r.length)}function n(t){t=t.getChannelData(0);for(var e=h.waveform.width,n=Math.floor(t.length/e),o=h.waveform.height,i=[],u=0;e>u;u+=h.bar.width)i.push(1e4*a(u*n,n,t));for(var c=o/Math.max.apply(null,i),d=0;e>d;d+=h.bar.width){var s=1e4*a(d*n,n,t);s*=c,s+=1,r(d,s)}return u>=e?!0:void 0}function o(t,e){for(var r in e)try{e[r].constructor==Object?t[r]=o(t[r],e[r]):t[r]=e[r]}catch(a){t[r]=e[r]}return t}function i(t,e){return o(h,e),c=document.createElement("svg"),c.id=s(),c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("version","1.1"),c.setAttributeNS(null,"viewBox","0 0 "+h.waveform.width+" "+h.waveform.height),d=document.createElement("style"),d.setAttribute("type","text/css"),d.appendChild(document.createTextNode("<![CDATA[path."+c.id+"{stroke:"+h.waveform.color+"}]]>")),c.appendChild(d),new Promise(function(e,r){u.decodeAudioData(t,function(t){n(t)&&e(c.outerHTML)})})}var h={waveform:{width:500,height:80,color:"#bada55"},bar:{align:"center",width:1,gap:0}},u=new AudioContext||new WebkitAudioContext,c=null,d=null,s=function(){return"a"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"b"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return i}();
//# sourceMappingURL=WaveformGenerator.promises.old.js.map