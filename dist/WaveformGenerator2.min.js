var WaveformGenerator=function(){function t(t,e){var r=u.bar.width;0!==u.bar.gap&&(r*=Math.abs(100-u.bar.gap)/100);var a=t+r/2,o=u.waveform.height/2-e/2,i=document.createElement("path");switch(u.bar.align){case"top":o=0;break;case"center":o=u.waveform.height/2-e/2;break;case"bottom":o=u.waveform.height-e}i.setAttribute("d","M"+a+" "+o+" L"+a+" "+o+" L"+a+" "+(o+e)+" L"+a+" "+(o+e)+" L"+a+" "+o+" Z"),i.className=n.id,n.appendChild(i)}function e(t,e,r){for(var a=0,o=t,n=t+e-1;n>=t?n>=o:o>=n;n>=t?o++:o--)a+=Math.pow(r[o],2);return Math.sqrt(a/r.length)}function r(r){r=r.getChannelData(0);for(var a=u.waveform.width,o=Math.floor(r.length/a),n=u.waveform.height,i=[],h=0;a>h;h+=u.bar.width)i.push(1e4*e(h*o,o,r));for(var c=n/Math.max.apply(null,i),d=0;a>d;d+=u.bar.width){var s=1e4*e(d*o,o,r);s*=c,s+=1,t(d,s)}return h>=a?!0:void 0}function a(t,e){for(var r in e)try{t[r]=e[r].constructor==Object?a(t[r],e[r]):e[r]}catch(o){t[r]=e[r]}return t}function o(t,e){return a(u,e),n=document.createElement("svg"),n.id=d(),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("version","1.1"),n.setAttributeNS(null,"viewBox","0 0 "+u.waveform.width+" "+u.waveform.height),i=document.createElement("style"),i.setAttribute("type","text/css"),i.appendChild(document.createTextNode("<![CDATA[path."+n.id+"{stroke:"+u.waveform.color+"}]]>")),n.appendChild(i),new Promise(function(e){c.decodeAudioData(t,function(t){r(t)&&e(n.outerHTML)})})}var n,i,h={waveform:{width:500,height:80,color:"#bada55"},bar:{align:"center",width:1,gap:0}},u=h,c=new AudioContext||new WebkitAudioContext,d=function(){return"a"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"b"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return o}();
